From a19b983316414bef593849331e3ea1fd6c92cb19 Mon Sep 17 00:00:00 2001
From: RubyRaven6 <swampertspawner@gmail.com>
Date: Wed, 9 Apr 2025 20:22:51 +0800
Subject: [PATCH 1/5] Implemented Complex Quests

---
 asm/macros/event.inc     |  11 ++++
 include/complex_quests.h | 114 +++++++++++++++++++++++++++++++++++++++
 src/quests.c             |  59 ++++++++++++++++++--
 src/strings.c            |   1 +
 4 files changed, 181 insertions(+), 4 deletions(-)
 create mode 100644 include/complex_quests.h

diff --git a/asm/macros/event.inc b/asm/macros/event.inc
index 54b929fbd363..ecca3ad223a6 100644
--- a/asm/macros/event.inc
+++ b/asm/macros/event.inc
@@ -1786,6 +1786,17 @@
 	waitfanfare
 	.endm
 
+	@ Updates the complex quest's variable to give it its next state.
+	.macro updatequest quest:req, questvar:req
+	addvar \questvar, 1
+	questmenu QUEST_MENU_BUFFER_QUEST_NAME \quest
+	bufferstring 1 gText_QuestUpdate
+	playse SE_PIN
+	msgbox gText_QuestUpdate, MSGBOX_SIGN
+	waitse
+	openquestmenu
+	.endm
+
 .macro goto_if_quest_inactive quest:req, dest:req
 	questmenu QUEST_MENU_CHECK_INACTIVE \quest
 	goto_if_eq VAR_RESULT, TRUE, \dest
diff --git a/include/complex_quests.h b/include/complex_quests.h
new file mode 100644
index 000000000000..37e7fc1f535d
--- /dev/null
+++ b/include/complex_quests.h
@@ -0,0 +1,114 @@
+#ifndef GUARD_COMPLEX_QUESTS_H
+#define GUARD_COMPLEX_QUESTS_H
+
+#include "global.h"
+#include "strings.h"
+#include "bg.h"
+#include "data.h"
+#include "decompress.h"
+#include "gpu_regs.h"
+#include "graphics.h"
+#include "item.h"
+#include "item_icon.h"
+#include "item_menu.h"
+#include "item_menu_icons.h"
+#include "list_menu.h"
+#include "item_use.h"
+#include "main.h"
+#include "malloc.h"
+#include "menu.h"
+#include "menu_helpers.h"
+#include "palette.h"
+#include "party_menu.h"
+#include "scanline_effect.h"
+#include "sound.h"
+#include "string_util.h"
+#include "strings.h"
+#include "task.h"
+#include "text_window.h"
+#include "quests.h"
+#include "overworld.h"
+#include "event_data.h"
+#include "constants/items.h"
+#include "constants/field_weather.h"
+#include "constants/songs.h"
+#include "constants/rgb.h"
+#include "constants/event_objects.h"
+#include "event_object_movement.h"
+#include "pokemon_icon.h"
+
+/////////////////////////////////////////////
+/////////////BEGIN STRING EXTERNS/////////////
+
+//Descriptions
+//Hearts and Diamonds
+extern const u8 gText_Quest3Desc_1[];
+extern const u8 gText_Quest3Desc_2[];
+extern const u8 gText_Quest3Desc_3[];
+
+extern const u8 *const gTable_Quest3Descs[];
+
+//Maps
+//Heart Quest
+extern const u8 gText_Quest3Map_1[];
+extern const u8 gText_Quest3Map_2[];
+extern const u8 gText_Quest3Map_3[];
+
+extern const u8 *const gTable_Quest3Maps[];
+
+/////////////END STRING EXTERNS/////////////
+////////////////////////////////////////////
+
+/////////////////////////////////////////
+///////////BEGIN QUEST STRINGS///////////
+
+/////BEGIN DESCRIPTIONS/////
+
+//Hearts and Diamonds Descriptions
+const u8 gText_Quest3Desc_1[] = _("Content 1");
+const u8 gText_Quest3Desc_2[] = _("Content 2");
+const u8 gText_Quest3Desc_3[] = _("Content 3");
+
+//////END DESCRIPTIONS//////
+
+//////////BEGIN MAPS////////
+
+//Heart Quest Maps
+const u8 gText_Quest3Map_1[] = _("Content 1");
+const u8 gText_Quest3Map_2[] = _("Content 2");
+const u8 gText_Quest3Map_3[] = _("Content 3");
+
+/////////END MAPS///////////
+
+////////////////////////////////////////
+///////////BEGIN QUEST ARRAYS///////////
+
+//Hearts Quest Arrays
+const u8 *const gTable_Quest3Descs[3] = {
+    gText_Quest3Desc_1,
+    gText_Quest3Desc_2,
+    gText_Quest3Desc_3,
+};
+
+const u8 *const gTable_Quest3Maps[3] = {
+    gText_Quest3Map_1,
+    gText_Quest3Map_2,
+    gText_Quest3Map_3,
+};
+
+static const u16 Quest3Sprites[3]={
+	OBJ_EVENT_GFX_WALLY,
+	OBJ_EVENT_GFX_WALLY,
+	OBJ_EVENT_GFX_WALLY,
+};
+
+static const u8 Quest3SpriteTypes[3]={
+	OBJECT,
+	OBJECT,
+	OBJECT,
+};
+
+/////////END QUEST ARRAYS/////////
+//////////////////////////////////
+
+#endif
\ No newline at end of file
diff --git a/src/quests.c b/src/quests.c
index 6d1f53f092df..b7083d206844 100644
--- a/src/quests.c
+++ b/src/quests.c
@@ -35,6 +35,7 @@
 #include "pokemon_icon.h"
 
 #include "random.h"
+#include "complex_quests.h"
 
 #define tPageItems      data[4]
 #define tItemPcParam    data[6]
@@ -143,6 +144,8 @@ static void PrintQuestLocation(s32 questId);
 static void GenerateQuestFlavorText(s32 questId);
 static void UpdateQuestFlavorText(s32 questId);
 static void PrintQuestFlavorText(s32 questId);
+static const u8 *GetQuestDesc(s32 questId);
+static const u8 *GetQuestLocation(s32 questId);
 
 static bool8 IsQuestUnlocked(s32 questId);
 static bool8 IsQuestActiveState(s32 questId);
@@ -155,6 +158,8 @@ static void DetermineSpriteType(s32 questId);
 static void QuestMenu_CreateSprite(u16 itemId, u8 idx, u8 spriteType);
 static void ResetSpriteState(void);
 static void QuestMenu_DestroySprite(u8 idx);
+static u16 GetSpriteId_Complex(s32 questId);
+static u8 GetSpriteType_Complex(s32 questId);
 
 static void GenerateStateAndPrint(u8 windowId, u32 itemId, u8 y);
 static u8 GenerateSubquestState(u8 questId);
@@ -2005,7 +2010,7 @@ void GenerateQuestLocation(s32 questId)
 {
 	if (!IsSubquestMode())
 	{
-		StringCopy(gStringVar2, sSideQuests[questId].map);
+		StringCopy(gStringVar2, GetQuestLocation(questId));
 	}
 	else
 	{
@@ -2059,7 +2064,7 @@ void GenerateQuestFlavorText(s32 questId)
 }
 void UpdateQuestFlavorText(s32 questId)
 {
-	StringCopy(gStringVar1, sSideQuests[questId].desc);
+	StringExpandPlaceholders(gStringVar1, GetQuestDesc(questId));
 }
 void PrintQuestFlavorText(s32 questId)
 {
@@ -2067,6 +2072,27 @@ void PrintQuestFlavorText(s32 questId)
 	                                      4);
 }
 
+static const u8 *GetQuestLocation(s32 questId)
+{
+    switch (questId) {
+        case QUEST_3:
+            return gTable_Quest3Maps[VarGet(VAR_UNUSED_0x404E)]; // uses first unused VAR in include/constants/vars.h
+        default:
+            return sSideQuests[questId].map;
+    }
+}
+
+static const u8 *GetQuestDesc(s32 questId)
+{
+    switch (questId) {
+        case QUEST_3:
+            return gTable_Quest3Descs[VarGet(VAR_UNUSED_0x404E)]; // uses first unused VAR in include/constants/vars.h
+        default:
+            return sSideQuests[questId].desc;
+    }
+}
+
+
 bool8 IsSubquestCompletedState(s32 questId)
 {
 	if (QuestMenu_GetSetSubquestState(sStateDataPtr->parentQuest,
@@ -2147,8 +2173,8 @@ void DetermineSpriteType(s32 questId)
 
 	if (IsSubquestMode() == FALSE)
 	{
-		spriteId = sSideQuests[questId].sprite;
-		spriteType = sSideQuests[questId].spritetype;
+		spriteId = GetSpriteId_Complex(questId);
+		spriteType = GetSpriteType_Complex(questId);
 
 		QuestMenu_CreateSprite(spriteId, sStateDataPtr->spriteIconSlot,
 		                       spriteType);
@@ -2169,6 +2195,7 @@ void DetermineSpriteType(s32 questId)
 	QuestMenu_DestroySprite(sStateDataPtr->spriteIconSlot ^ 1);
 	sStateDataPtr->spriteIconSlot ^= 1;
 }
+
 static void QuestMenu_CreateSprite(u16 itemId, u8 idx, u8 spriteType)
 {
 	u8 *ptr = &sItemMenuIconSpriteIds[10];
@@ -2242,6 +2269,30 @@ static void QuestMenu_DestroySprite(u8 idx)
 		}
 	}
 }
+
+static u16 GetSpriteId_Complex(s32 questId)
+{
+	switch (questId)
+    {
+		case QUEST_3:
+		    return Quest3Sprites[VarGet(VAR_UNUSED_0x404E)]; // uses first unused VAR in include/constants/vars.h
+		default:
+		    return sSideQuests[questId].sprite;
+	} 
+}
+
+static u8 GetSpriteType_Complex(s32 questId)
+{
+	switch (questId)
+    {
+		case QUEST_3:
+		    return Quest3SpriteTypes[VarGet(VAR_UNUSED_0x404E)]; // uses first unused VAR in include/constants/vars.h
+		default:
+		    return sSideQuests[questId].spritetype;
+	} 
+}
+
+
 static void GenerateStateAndPrint(u8 windowId, u32 questId,
                                   u8 y)
 {
diff --git a/src/strings.c b/src/strings.c
index 903ab25f8e4f..7d55b9ecd115 100644
--- a/src/strings.c
+++ b/src/strings.c
@@ -1825,6 +1825,7 @@ const u8 gText_Berries[] = _("BERRIES");
 const u8 gText_QuestAnnounce[] = _("The quest '{STR_VAR_1}'\nis now {STR_VAR_2}.");
 const u8 gText_QuestComplete[] =_("complete");
 const u8 gText_QuestActive[] =_("active");
+const u8 gText_QuestUpdate[] = _("The quest '{STR_VAR_1}'\nhas been updated!");
 
 //names
 const u8 gText_SideQuestName_1[] = _("Side Quest 1");

From 9387caab9d134b54e7cde570dba8658b8b48a7d2 Mon Sep 17 00:00:00 2001
From: RubyRaven6 <swampertspawner@gmail.com>
Date: Sat, 10 May 2025 12:13:36 +0800
Subject: [PATCH 2/5] New questvariable

---
 include/complex_quests.h |  25 +-
 include/quests.h         |   1 +
 src/quests.c             | 480 +++++++++++++++++++++------------------
 3 files changed, 276 insertions(+), 230 deletions(-)

diff --git a/include/complex_quests.h b/include/complex_quests.h
index 37e7fc1f535d..4f86065cde75 100644
--- a/include/complex_quests.h
+++ b/include/complex_quests.h
@@ -37,7 +37,22 @@
 #include "event_object_movement.h"
 #include "pokemon_icon.h"
 
-/////////////////////////////////////////////
+//////////////////////////////////////////
+////////////BEGIN QUEST NUMS//////////////
+
+/* These will be where the number of descriptions and maps a quest has will be controlled.*/
+
+enum Quest3_Enum{
+    QUEST_3_STATE_1,
+    QUEST_3_STATE_2,
+    QUEST_3_STATE_3,
+    QUEST_3_TOTAL_STATES,
+};
+
+/////////////END QUEST NUMS/////////////
+////////////////////////////////////////
+
+//////////////////////////////////////////////
 /////////////BEGIN STRING EXTERNS/////////////
 
 //Descriptions
@@ -84,25 +99,25 @@ const u8 gText_Quest3Map_3[] = _("Content 3");
 ///////////BEGIN QUEST ARRAYS///////////
 
 //Hearts Quest Arrays
-const u8 *const gTable_Quest3Descs[3] = {
+const u8 *const gTable_Quest3Descs[QUEST_3_TOTAL_STATES] = {
     gText_Quest3Desc_1,
     gText_Quest3Desc_2,
     gText_Quest3Desc_3,
 };
 
-const u8 *const gTable_Quest3Maps[3] = {
+const u8 *const gTable_Quest3Maps[QUEST_3_TOTAL_STATES] = {
     gText_Quest3Map_1,
     gText_Quest3Map_2,
     gText_Quest3Map_3,
 };
 
-static const u16 Quest3Sprites[3]={
+static const u16 Quest3Sprites[QUEST_3_TOTAL_STATES]={
 	OBJ_EVENT_GFX_WALLY,
 	OBJ_EVENT_GFX_WALLY,
 	OBJ_EVENT_GFX_WALLY,
 };
 
-static const u8 Quest3SpriteTypes[3]={
+static const u8 Quest3SpriteTypes[QUEST_3_TOTAL_STATES]={
 	OBJECT,
 	OBJECT,
 	OBJECT,
diff --git a/include/quests.h b/include/quests.h
index 56cdf661f708..b74797b0ffee 100644
--- a/include/quests.h
+++ b/include/quests.h
@@ -46,6 +46,7 @@ struct SideQuest
     const u8 spritetype;
 	const struct SubQuest *subquests;
 	const u8 numSubquests;
+	const u16 questVariable;
 }; 
 
 enum QuestCases
diff --git a/src/quests.c b/src/quests.c
index b7083d206844..b2fb04edfb20 100644
--- a/src/quests.c
+++ b/src/quests.c
@@ -563,7 +563,7 @@ static const struct SubQuest sSubQuests2[QUEST_2_SUB_COUNT] =
 ////////////////////////BEGIN QUEST CUSTOMIZATION//////////////////////////////
 
 //Declaration of side quest structures. Edits to quests are made here.
-#define side_quest(n, d, dd, m, s, st, sq, ns) {.name = n, .desc = d, .donedesc = dd, .map = m, .sprite = s, .spritetype = st, .subquests = sq, .numSubquests = ns}
+#define side_quest(n, d, dd, m, s, st, sq, ns, qvar) {.name = n, .desc = d, .donedesc = dd, .map = m, .sprite = s, .spritetype = st, .subquests = sq, .numSubquests = ns, .questVariable = qvar}
 static const struct SideQuest sSideQuests[QUEST_COUNT] =
 {
 	side_quest(
@@ -574,7 +574,8 @@ static const struct SideQuest sSideQuests[QUEST_COUNT] =
 	      OBJ_EVENT_GFX_WALLY,
 	      OBJECT,
 	      NULL,
-	      0
+	      0,
+		  0
 	),
 	side_quest(
 	      gText_SideQuestName_2,
@@ -584,7 +585,8 @@ static const struct SideQuest sSideQuests[QUEST_COUNT] =
 	      OBJ_EVENT_GFX_WALLY,
 	      OBJECT,
 	      sSubQuests1,
-	      QUEST_1_SUB_COUNT
+	      QUEST_1_SUB_COUNT,
+		  0
 	),
 	side_quest(
 	      gText_SideQuestName_3,
@@ -594,277 +596,305 @@ static const struct SideQuest sSideQuests[QUEST_COUNT] =
 	      OBJ_EVENT_GFX_WALLY,
 	      OBJECT,
 	      sSubQuests2,
-	      QUEST_2_SUB_COUNT
+	      QUEST_2_SUB_COUNT,
+		  VAR_UNUSED_0x404E //First unused var in vars.h
 	),
 	side_quest(
-	      gText_SideQuestName_4,
-	      gText_SideQuestDesc_4,
-	      gText_SideQuestDoneDesc_4,
-	      gText_SideQuestMap4,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_4,
+		gText_SideQuestDesc_4,
+		gText_SideQuestDoneDesc_4,
+		gText_SideQuestMap4,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_5,
-	      gText_SideQuestDesc_5,
-	      gText_SideQuestDoneDesc_5,
-	      gText_SideQuestMap5,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_5,
+		gText_SideQuestDesc_5,
+		gText_SideQuestDoneDesc_5,
+		gText_SideQuestMap5,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_6,
-	      gText_SideQuestDesc_6,
-	      gText_SideQuestDoneDesc_6,
-	      gText_SideQuestMap6,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_6,
+		gText_SideQuestDesc_6,
+		gText_SideQuestDoneDesc_6,
+		gText_SideQuestMap6,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_7,
-	      gText_SideQuestDesc_7,
-	      gText_SideQuestDoneDesc_7,
-	      gText_SideQuestMap7,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_7,
+		gText_SideQuestDesc_7,
+		gText_SideQuestDoneDesc_7,
+		gText_SideQuestMap7,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_8,
-	      gText_SideQuestDesc_8,
-	      gText_SideQuestDoneDesc_8,
-	      gText_SideQuestMap8,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_8,
+		gText_SideQuestDesc_8,
+		gText_SideQuestDoneDesc_8,
+		gText_SideQuestMap8,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_9,
-	      gText_SideQuestDesc_9,
-	      gText_SideQuestDoneDesc_9,
-	      gText_SideQuestMap9,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_9,
+		gText_SideQuestDesc_9,
+		gText_SideQuestDoneDesc_9,
+		gText_SideQuestMap9,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_10,
-	      gText_SideQuestDesc_10,
-	      gText_SideQuestDoneDesc_10,
-	      gText_SideQuestMap10,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_10,
+		gText_SideQuestDesc_10,
+		gText_SideQuestDoneDesc_10,
+		gText_SideQuestMap10,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_11,
-	      gText_SideQuestDesc_11,
-	      gText_SideQuestDoneDesc_11,
-	      gText_SideQuestMap11,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_11,
+		gText_SideQuestDesc_11,
+		gText_SideQuestDoneDesc_11,
+		gText_SideQuestMap11,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_12,
-	      gText_SideQuestDesc_12,
-	      gText_SideQuestDoneDesc_12,
-	      gText_SideQuestMap12,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_12,
+		gText_SideQuestDesc_12,
+		gText_SideQuestDoneDesc_12,
+		gText_SideQuestMap12,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_13,
-	      gText_SideQuestDesc_13,
-	      gText_SideQuestDoneDesc_13,
-	      gText_SideQuestMap13,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_13,
+		gText_SideQuestDesc_13,
+		gText_SideQuestDoneDesc_13,
+		gText_SideQuestMap13,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_14,
-	      gText_SideQuestDesc_14,
-	      gText_SideQuestDoneDesc_14,
-	      gText_SideQuestMap14,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_14,
+		gText_SideQuestDesc_14,
+		gText_SideQuestDoneDesc_14,
+		gText_SideQuestMap14,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_15,
-	      gText_SideQuestDesc_15,
-	      gText_SideQuestDoneDesc_15,
-	      gText_SideQuestMap15,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_15,
+		gText_SideQuestDesc_15,
+		gText_SideQuestDoneDesc_15,
+		gText_SideQuestMap15,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_16,
-	      gText_SideQuestDesc_16,
-	      gText_SideQuestDoneDesc_16,
-	      gText_SideQuestMap16,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_16,
+		gText_SideQuestDesc_16,
+		gText_SideQuestDoneDesc_16,
+		gText_SideQuestMap16,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_17,
-	      gText_SideQuestDesc_17,
-	      gText_SideQuestDoneDesc_17,
-	      gText_SideQuestMap17,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_17,
+		gText_SideQuestDesc_17,
+		gText_SideQuestDoneDesc_17,
+		gText_SideQuestMap17,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_18,
-	      gText_SideQuestDesc_18,
-	      gText_SideQuestDoneDesc_18,
-	      gText_SideQuestMap18,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_18,
+		gText_SideQuestDesc_18,
+		gText_SideQuestDoneDesc_18,
+		gText_SideQuestMap18,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_19,
-	      gText_SideQuestDesc_19,
-	      gText_SideQuestDoneDesc_19,
-	      gText_SideQuestMap19,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_19,
+		gText_SideQuestDesc_19,
+		gText_SideQuestDoneDesc_19,
+		gText_SideQuestMap19,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_20,
-	      gText_SideQuestDesc_20,
-	      gText_SideQuestDoneDesc_20,
-	      gText_SideQuestMap20,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_20,
+		gText_SideQuestDesc_20,
+		gText_SideQuestDoneDesc_20,
+		gText_SideQuestMap20,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_21,
-	      gText_SideQuestDesc_21,
-	      gText_SideQuestDoneDesc_21,
-	      gText_SideQuestMap21,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_21,
+		gText_SideQuestDesc_21,
+		gText_SideQuestDoneDesc_21,
+		gText_SideQuestMap21,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_22,
-	      gText_SideQuestDesc_22,
-	      gText_SideQuestDoneDesc_22,
-	      gText_SideQuestMap22,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_22,
+		gText_SideQuestDesc_22,
+		gText_SideQuestDoneDesc_22,
+		gText_SideQuestMap22,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_23,
-	      gText_SideQuestDesc_23,
-	      gText_SideQuestDoneDesc_23,
-	      gText_SideQuestMap23,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_23,
+		gText_SideQuestDesc_23,
+		gText_SideQuestDoneDesc_23,
+		gText_SideQuestMap23,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_24,
-	      gText_SideQuestDesc_24,
-	      gText_SideQuestDoneDesc_24,
-	      gText_SideQuestMap24,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_24,
+		gText_SideQuestDesc_24,
+		gText_SideQuestDoneDesc_24,
+		gText_SideQuestMap24,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_25,
-	      gText_SideQuestDesc_25,
-	      gText_SideQuestDoneDesc_25,
-	      gText_SideQuestMap25,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_25,
+		gText_SideQuestDesc_25,
+		gText_SideQuestDoneDesc_25,
+		gText_SideQuestMap25,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_26,
-	      gText_SideQuestDesc_26,
-	      gText_SideQuestDoneDesc_26,
-	      gText_SideQuestMap26,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_26,
+		gText_SideQuestDesc_26,
+		gText_SideQuestDoneDesc_26,
+		gText_SideQuestMap26,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_27,
-	      gText_SideQuestDesc_27,
-	      gText_SideQuestDoneDesc_27,
-	      gText_SideQuestMap27,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_27,
+		gText_SideQuestDesc_27,
+		gText_SideQuestDoneDesc_27,
+		gText_SideQuestMap27,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_28,
-	      gText_SideQuestDesc_28,
-	      gText_SideQuestDoneDesc_28,
-	      gText_SideQuestMap28,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_28,
+		gText_SideQuestDesc_28,
+		gText_SideQuestDoneDesc_28,
+		gText_SideQuestMap28,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_29,
-	      gText_SideQuestDesc_29,
-	      gText_SideQuestDoneDesc_29,
-	      gText_SideQuestMap29,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_29,
+		gText_SideQuestDesc_29,
+		gText_SideQuestDoneDesc_29,
+		gText_SideQuestMap29,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 	side_quest(
-	      gText_SideQuestName_30,
-	      gText_SideQuestDesc_30,
-	      gText_SideQuestDoneDesc_30,
-	      gText_SideQuestMap30,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0
+		gText_SideQuestName_30,
+		gText_SideQuestDesc_30,
+		gText_SideQuestDoneDesc_30,
+		gText_SideQuestMap30,
+		OBJ_EVENT_GFX_WALLY,
+		OBJECT,
+		NULL,
+		0,
+		0
 	),
 };
 ////////////////////////END QUEST CUSTOMIZATION////////////////////////////////
@@ -2076,7 +2106,7 @@ static const u8 *GetQuestLocation(s32 questId)
 {
     switch (questId) {
         case QUEST_3:
-            return gTable_Quest3Maps[VarGet(VAR_UNUSED_0x404E)]; // uses first unused VAR in include/constants/vars.h
+            return gTable_Quest3Maps[VarGet(sSideQuests[questId].questVariable)]; // uses first unused VAR in include/constants/vars.h
         default:
             return sSideQuests[questId].map;
     }
@@ -2084,9 +2114,9 @@ static const u8 *GetQuestLocation(s32 questId)
 
 static const u8 *GetQuestDesc(s32 questId)
 {
-    switch (questId) {
+	switch (questId) {
         case QUEST_3:
-            return gTable_Quest3Descs[VarGet(VAR_UNUSED_0x404E)]; // uses first unused VAR in include/constants/vars.h
+            return gTable_Quest3Descs[VarGet(sSideQuests[questId].questVariable)]; // uses first unused VAR in include/constants/vars.h
         default:
             return sSideQuests[questId].desc;
     }
@@ -2275,7 +2305,7 @@ static u16 GetSpriteId_Complex(s32 questId)
 	switch (questId)
     {
 		case QUEST_3:
-		    return Quest3Sprites[VarGet(VAR_UNUSED_0x404E)]; // uses first unused VAR in include/constants/vars.h
+		    return Quest3Sprites[VarGet(sSideQuests[questId].questVariable)]; // uses first unused VAR in include/constants/vars.h
 		default:
 		    return sSideQuests[questId].sprite;
 	} 
@@ -2286,7 +2316,7 @@ static u8 GetSpriteType_Complex(s32 questId)
 	switch (questId)
     {
 		case QUEST_3:
-		    return Quest3SpriteTypes[VarGet(VAR_UNUSED_0x404E)]; // uses first unused VAR in include/constants/vars.h
+		    return Quest3SpriteTypes[VarGet(sSideQuests[questId].questVariable)]; // uses first unused VAR in include/constants/vars.h
 		default:
 		    return sSideQuests[questId].spritetype;
 	} 

From 5e463ffe5f0afd931df78a1d103ea3bf01bab1d4 Mon Sep 17 00:00:00 2001
From: RubyRaven6 <swampertspawner@gmail.com>
Date: Sat, 10 May 2025 12:14:17 +0800
Subject: [PATCH 3/5] Renamed comments

---
 include/complex_quests.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/complex_quests.h b/include/complex_quests.h
index 4f86065cde75..2722df9b2a92 100644
--- a/include/complex_quests.h
+++ b/include/complex_quests.h
@@ -56,7 +56,7 @@ enum Quest3_Enum{
 /////////////BEGIN STRING EXTERNS/////////////
 
 //Descriptions
-//Hearts and Diamonds
+//Quest 3 Descriptions
 extern const u8 gText_Quest3Desc_1[];
 extern const u8 gText_Quest3Desc_2[];
 extern const u8 gText_Quest3Desc_3[];
@@ -64,7 +64,7 @@ extern const u8 gText_Quest3Desc_3[];
 extern const u8 *const gTable_Quest3Descs[];
 
 //Maps
-//Heart Quest
+//Quest 3
 extern const u8 gText_Quest3Map_1[];
 extern const u8 gText_Quest3Map_2[];
 extern const u8 gText_Quest3Map_3[];

From e5c907ae129ce5745a642d585a870486b80aae2e Mon Sep 17 00:00:00 2001
From: RubyRaven6 <swampertspawner@gmail.com>
Date: Sat, 10 May 2025 13:02:54 +0800
Subject: [PATCH 4/5] Refactored Functions and arrays; also unwound macro for
 sidequests

---
 include/complex_quests.h |  55 +--
 include/quests.h         |  11 +-
 src/quests.c             | 770 +++++++++++++++++++++------------------
 3 files changed, 432 insertions(+), 404 deletions(-)

diff --git a/include/complex_quests.h b/include/complex_quests.h
index 2722df9b2a92..1e34153afeab 100644
--- a/include/complex_quests.h
+++ b/include/complex_quests.h
@@ -57,17 +57,17 @@ enum Quest3_Enum{
 
 //Descriptions
 //Quest 3 Descriptions
-extern const u8 gText_Quest3Desc_1[];
-extern const u8 gText_Quest3Desc_2[];
-extern const u8 gText_Quest3Desc_3[];
+extern const u8 gComplexQuest_Quest3Desc_1[];
+extern const u8 gComplexQuest_Quest3Desc_2[];
+extern const u8 gComplexQuest_Quest3Desc_3[];
 
 extern const u8 *const gTable_Quest3Descs[];
 
 //Maps
 //Quest 3
-extern const u8 gText_Quest3Map_1[];
-extern const u8 gText_Quest3Map_2[];
-extern const u8 gText_Quest3Map_3[];
+extern const u8 gComplexQuest_Quest3Map_1[];
+extern const u8 gComplexQuest_Quest3Map_2[];
+extern const u8 gComplexQuest_Quest3Map_3[];
 
 extern const u8 *const gTable_Quest3Maps[];
 
@@ -80,50 +80,19 @@ extern const u8 *const gTable_Quest3Maps[];
 /////BEGIN DESCRIPTIONS/////
 
 //Hearts and Diamonds Descriptions
-const u8 gText_Quest3Desc_1[] = _("Content 1");
-const u8 gText_Quest3Desc_2[] = _("Content 2");
-const u8 gText_Quest3Desc_3[] = _("Content 3");
+const u8 gComplexQuest_Quest3Desc_1[] = _("Content 1");
+const u8 gComplexQuest_Quest3Desc_2[] = _("Content 2");
+const u8 gComplexQuest_Quest3Desc_3[] = _("Content 3");
 
 //////END DESCRIPTIONS//////
 
 //////////BEGIN MAPS////////
 
 //Heart Quest Maps
-const u8 gText_Quest3Map_1[] = _("Content 1");
-const u8 gText_Quest3Map_2[] = _("Content 2");
-const u8 gText_Quest3Map_3[] = _("Content 3");
+const u8 gComplexQuest_Quest3Map_1[] = _("Content 1");
+const u8 gComplexQuest_Quest3Map_2[] = _("Content 2");
+const u8 gComplexQuest_Quest3Map_3[] = _("Content 3");
 
 /////////END MAPS///////////
 
-////////////////////////////////////////
-///////////BEGIN QUEST ARRAYS///////////
-
-//Hearts Quest Arrays
-const u8 *const gTable_Quest3Descs[QUEST_3_TOTAL_STATES] = {
-    gText_Quest3Desc_1,
-    gText_Quest3Desc_2,
-    gText_Quest3Desc_3,
-};
-
-const u8 *const gTable_Quest3Maps[QUEST_3_TOTAL_STATES] = {
-    gText_Quest3Map_1,
-    gText_Quest3Map_2,
-    gText_Quest3Map_3,
-};
-
-static const u16 Quest3Sprites[QUEST_3_TOTAL_STATES]={
-	OBJ_EVENT_GFX_WALLY,
-	OBJ_EVENT_GFX_WALLY,
-	OBJ_EVENT_GFX_WALLY,
-};
-
-static const u8 Quest3SpriteTypes[QUEST_3_TOTAL_STATES]={
-	OBJECT,
-	OBJECT,
-	OBJECT,
-};
-
-/////////END QUEST ARRAYS/////////
-//////////////////////////////////
-
 #endif
\ No newline at end of file
diff --git a/include/quests.h b/include/quests.h
index b74797b0ffee..15d0a3fb09b2 100644
--- a/include/quests.h
+++ b/include/quests.h
@@ -25,6 +25,9 @@
 #define ITEM 2
 #define PKMN 3
 
+#define MAX_QUEST_STATES 50
+/* Defines how many states a complex quest can have */
+
 struct SubQuest
 {
     const u8 id;
@@ -39,11 +42,11 @@ struct SubQuest
 struct SideQuest
 {
 	const u8 *name;
-	const u8 *desc;
+	const u8 *desc[MAX_QUEST_STATES];
 	const u8 *donedesc;
-	const u8 *map;
-	const u16 sprite;
-    const u8 spritetype;
+	const u8 *map[MAX_QUEST_STATES];
+	const u16 sprite[MAX_QUEST_STATES];
+    const u8 spritetype[MAX_QUEST_STATES];
 	const struct SubQuest *subquests;
 	const u8 numSubquests;
 	const u16 questVariable;
diff --git a/src/quests.c b/src/quests.c
index b2fb04edfb20..76e796b186b2 100644
--- a/src/quests.c
+++ b/src/quests.c
@@ -563,339 +563,397 @@ static const struct SubQuest sSubQuests2[QUEST_2_SUB_COUNT] =
 ////////////////////////BEGIN QUEST CUSTOMIZATION//////////////////////////////
 
 //Declaration of side quest structures. Edits to quests are made here.
-#define side_quest(n, d, dd, m, s, st, sq, ns, qvar) {.name = n, .desc = d, .donedesc = dd, .map = m, .sprite = s, .spritetype = st, .subquests = sq, .numSubquests = ns, .questVariable = qvar}
 static const struct SideQuest sSideQuests[QUEST_COUNT] =
 {
-	side_quest(
-	      gText_SideQuestName_1,
-	      gText_SideQuestDesc_1,
-	      gText_SideQuestDoneDesc_1,
-	      gText_SideQuestMap1,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      NULL,
-	      0,
-		  0
-	),
-	side_quest(
-	      gText_SideQuestName_2,
-	      gText_SideQuestDesc_2,
-	      gText_SideQuestDoneDesc_2,
-	      gText_SideQuestMap2,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      sSubQuests1,
-	      QUEST_1_SUB_COUNT,
-		  0
-	),
-	side_quest(
-	      gText_SideQuestName_3,
-	      gText_SideQuestDesc_3,
-	      gText_SideQuestDoneDesc_3,
-	      gText_SideQuestMap3,
-	      OBJ_EVENT_GFX_WALLY,
-	      OBJECT,
-	      sSubQuests2,
-	      QUEST_2_SUB_COUNT,
-		  VAR_UNUSED_0x404E //First unused var in vars.h
-	),
-	side_quest(
-		gText_SideQuestName_4,
-		gText_SideQuestDesc_4,
-		gText_SideQuestDoneDesc_4,
-		gText_SideQuestMap4,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_5,
-		gText_SideQuestDesc_5,
-		gText_SideQuestDoneDesc_5,
-		gText_SideQuestMap5,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_6,
-		gText_SideQuestDesc_6,
-		gText_SideQuestDoneDesc_6,
-		gText_SideQuestMap6,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_7,
-		gText_SideQuestDesc_7,
-		gText_SideQuestDoneDesc_7,
-		gText_SideQuestMap7,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_8,
-		gText_SideQuestDesc_8,
-		gText_SideQuestDoneDesc_8,
-		gText_SideQuestMap8,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_9,
-		gText_SideQuestDesc_9,
-		gText_SideQuestDoneDesc_9,
-		gText_SideQuestMap9,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_10,
-		gText_SideQuestDesc_10,
-		gText_SideQuestDoneDesc_10,
-		gText_SideQuestMap10,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_11,
-		gText_SideQuestDesc_11,
-		gText_SideQuestDoneDesc_11,
-		gText_SideQuestMap11,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_12,
-		gText_SideQuestDesc_12,
-		gText_SideQuestDoneDesc_12,
-		gText_SideQuestMap12,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_13,
-		gText_SideQuestDesc_13,
-		gText_SideQuestDoneDesc_13,
-		gText_SideQuestMap13,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_14,
-		gText_SideQuestDesc_14,
-		gText_SideQuestDoneDesc_14,
-		gText_SideQuestMap14,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_15,
-		gText_SideQuestDesc_15,
-		gText_SideQuestDoneDesc_15,
-		gText_SideQuestMap15,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_16,
-		gText_SideQuestDesc_16,
-		gText_SideQuestDoneDesc_16,
-		gText_SideQuestMap16,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_17,
-		gText_SideQuestDesc_17,
-		gText_SideQuestDoneDesc_17,
-		gText_SideQuestMap17,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_18,
-		gText_SideQuestDesc_18,
-		gText_SideQuestDoneDesc_18,
-		gText_SideQuestMap18,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_19,
-		gText_SideQuestDesc_19,
-		gText_SideQuestDoneDesc_19,
-		gText_SideQuestMap19,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_20,
-		gText_SideQuestDesc_20,
-		gText_SideQuestDoneDesc_20,
-		gText_SideQuestMap20,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_21,
-		gText_SideQuestDesc_21,
-		gText_SideQuestDoneDesc_21,
-		gText_SideQuestMap21,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_22,
-		gText_SideQuestDesc_22,
-		gText_SideQuestDoneDesc_22,
-		gText_SideQuestMap22,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_23,
-		gText_SideQuestDesc_23,
-		gText_SideQuestDoneDesc_23,
-		gText_SideQuestMap23,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_24,
-		gText_SideQuestDesc_24,
-		gText_SideQuestDoneDesc_24,
-		gText_SideQuestMap24,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_25,
-		gText_SideQuestDesc_25,
-		gText_SideQuestDoneDesc_25,
-		gText_SideQuestMap25,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_26,
-		gText_SideQuestDesc_26,
-		gText_SideQuestDoneDesc_26,
-		gText_SideQuestMap26,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_27,
-		gText_SideQuestDesc_27,
-		gText_SideQuestDoneDesc_27,
-		gText_SideQuestMap27,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_28,
-		gText_SideQuestDesc_28,
-		gText_SideQuestDoneDesc_28,
-		gText_SideQuestMap28,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_29,
-		gText_SideQuestDesc_29,
-		gText_SideQuestDoneDesc_29,
-		gText_SideQuestMap29,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
-	side_quest(
-		gText_SideQuestName_30,
-		gText_SideQuestDesc_30,
-		gText_SideQuestDoneDesc_30,
-		gText_SideQuestMap30,
-		OBJ_EVENT_GFX_WALLY,
-		OBJECT,
-		NULL,
-		0,
-		0
-	),
+	[QUEST_1] = 
+	{
+		.name = gText_SideQuestName_1,
+		.desc = {gText_SideQuestDesc_1},
+		.donedesc = gText_SideQuestDoneDesc_1,
+		.map = {gText_SideQuestMap1},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_2] = 
+	{
+		.name = gText_SideQuestName_2,
+		.desc = {gText_SideQuestDesc_2},
+		.donedesc = gText_SideQuestDoneDesc_2,
+		.map = {gText_SideQuestMap2},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = sSubQuests1,
+		.numSubquests = QUEST_1_SUB_COUNT,
+		.questVariable = 0,
+	},
+
+	[QUEST_3] = 
+	{
+		.name = gText_SideQuestName_3,
+		.desc = {gText_SideQuestDesc_3,gComplexQuest_Quest3Desc_1,gComplexQuest_Quest3Desc_2,gComplexQuest_Quest3Desc_3},
+		.donedesc = gText_SideQuestDoneDesc_3,
+		.map = {gText_SideQuestMap3, gComplexQuest_Quest3Map_1,	gComplexQuest_Quest3Map_2, gComplexQuest_Quest3Map_3},
+		.sprite = {OBJ_EVENT_GFX_WALLY,OBJ_EVENT_GFX_WALLY,OBJ_EVENT_GFX_WALLY,OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT,OBJECT,OBJECT,OBJECT},
+		.subquests = sSubQuests2,
+		.numSubquests = QUEST_2_SUB_COUNT,
+		.questVariable = VAR_UNUSED_0x404E //First unused var in vars.h,
+	},
+
+	[QUEST_4] = 
+	{
+		.name = gText_SideQuestName_4,
+		.desc = {gText_SideQuestDesc_4},
+		.donedesc = gText_SideQuestDoneDesc_4,
+		.map = {gText_SideQuestMap4},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_5] = 
+	{
+		.name = gText_SideQuestName_5,
+		.desc = {gText_SideQuestDesc_5},
+		.donedesc = gText_SideQuestDoneDesc_5,
+		.map = {gText_SideQuestMap5},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_6] = 
+	{
+		.name = gText_SideQuestName_6,
+		.desc = {gText_SideQuestDesc_6},
+		.donedesc = gText_SideQuestDoneDesc_6,
+		.map = {gText_SideQuestMap6},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_7] = 
+	{
+		.name = gText_SideQuestName_7,
+		.desc = {gText_SideQuestDesc_7},
+		.donedesc = gText_SideQuestDoneDesc_7,
+		.map = {gText_SideQuestMap7},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_8] = 
+	{
+		.name = gText_SideQuestName_8,
+		.desc = {gText_SideQuestDesc_8},
+		.donedesc = gText_SideQuestDoneDesc_8,
+		.map = {gText_SideQuestMap8},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_9] = 
+	{
+		.name = gText_SideQuestName_9,
+		.desc = {gText_SideQuestDesc_9},
+		.donedesc = gText_SideQuestDoneDesc_9,
+		.map = {gText_SideQuestMap9},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_10] = 
+	{
+		.name = gText_SideQuestName_10,
+		.desc = {gText_SideQuestDesc_10},
+		.donedesc = gText_SideQuestDoneDesc_10,
+		.map = {gText_SideQuestMap10},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_11] = 
+	{
+		.name = gText_SideQuestName_11,
+		.desc = {gText_SideQuestDesc_11},
+		.donedesc = gText_SideQuestDoneDesc_11,
+		.map = {gText_SideQuestMap11},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_12] = 
+	{
+		.name = gText_SideQuestName_12,
+		.desc = {gText_SideQuestDesc_12},
+		.donedesc = gText_SideQuestDoneDesc_12,
+		.map = {gText_SideQuestMap12},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_13] = 
+	{
+		.name = gText_SideQuestName_13,
+		.desc = {gText_SideQuestDesc_13},
+		.donedesc = gText_SideQuestDoneDesc_13,
+		.map = {gText_SideQuestMap13},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_14] = 
+	{
+		.name = gText_SideQuestName_14,
+		.desc = {gText_SideQuestDesc_14},
+		.donedesc = gText_SideQuestDoneDesc_14,
+		.map = {gText_SideQuestMap14},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_15] = 
+	{
+		.name = gText_SideQuestName_15,
+		.desc = {gText_SideQuestDesc_15},
+		.donedesc = gText_SideQuestDoneDesc_15,
+		.map = {gText_SideQuestMap15},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_16] = 
+	{
+		.name = gText_SideQuestName_16,
+		.desc = {gText_SideQuestDesc_16},
+		.donedesc = gText_SideQuestDoneDesc_16,
+		.map = {gText_SideQuestMap16},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_17] = 
+	{
+		.name = gText_SideQuestName_17,
+		.desc = {gText_SideQuestDesc_17},
+		.donedesc = gText_SideQuestDoneDesc_17,
+		.map = {gText_SideQuestMap17},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_18] = 
+	{
+		.name = gText_SideQuestName_18,
+		.desc = {gText_SideQuestDesc_18},
+		.donedesc = gText_SideQuestDoneDesc_18,
+		.map = {gText_SideQuestMap18},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_19] = 
+	{
+		.name = gText_SideQuestName_19,
+		.desc = {gText_SideQuestDesc_19},
+		.donedesc = gText_SideQuestDoneDesc_19,
+		.map = {gText_SideQuestMap19},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_20] = 
+	{
+		.name = gText_SideQuestName_20,
+		.desc = {gText_SideQuestDesc_20},
+		.donedesc = gText_SideQuestDoneDesc_20,
+		.map = {gText_SideQuestMap20},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_21] = 
+	{
+		.name = gText_SideQuestName_21,
+		.desc = {gText_SideQuestDesc_21},
+		.donedesc = gText_SideQuestDoneDesc_21,
+		.map = {gText_SideQuestMap21},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_22] = 
+	{
+		.name = gText_SideQuestName_22,
+		.desc = {gText_SideQuestDesc_22},
+		.donedesc = gText_SideQuestDoneDesc_22,
+		.map = {gText_SideQuestMap22},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_23] = 
+	{
+		.name = gText_SideQuestName_23,
+		.desc = {gText_SideQuestDesc_23},
+		.donedesc = gText_SideQuestDoneDesc_23,
+		.map = {gText_SideQuestMap23},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_24] = 
+	{
+		.name = gText_SideQuestName_24,
+		.desc = {gText_SideQuestDesc_24},
+		.donedesc = gText_SideQuestDoneDesc_24,
+		.map = {gText_SideQuestMap24},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_25] = 
+	{
+		.name = gText_SideQuestName_25,
+		.desc = {gText_SideQuestDesc_25},
+		.donedesc = gText_SideQuestDoneDesc_25,
+		.map = {gText_SideQuestMap25},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_26] = 
+	{
+		.name = gText_SideQuestName_26,
+		.desc = {gText_SideQuestDesc_26},
+		.donedesc = gText_SideQuestDoneDesc_26,
+		.map = {gText_SideQuestMap26},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_27] = 
+	{
+		.name = gText_SideQuestName_27,
+		.desc = {gText_SideQuestDesc_27},
+		.donedesc = gText_SideQuestDoneDesc_27,
+		.map = {gText_SideQuestMap27},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_28] = 
+	{
+		.name = gText_SideQuestName_28,
+		.desc = {gText_SideQuestDesc_28},
+		.donedesc = gText_SideQuestDoneDesc_28,
+		.map = {gText_SideQuestMap28},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_29] = 
+	{
+		.name = gText_SideQuestName_29,
+		.desc = {gText_SideQuestDesc_29},
+		.donedesc = gText_SideQuestDoneDesc_29,
+		.map = {gText_SideQuestMap29},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,
+	},
+
+	[QUEST_30] = 
+	{
+		.name = gText_SideQuestName_30,
+		.desc = {gText_SideQuestDesc_30},
+		.donedesc = gText_SideQuestDoneDesc_30,
+		.map = {gText_SideQuestMap30},
+		.sprite = {OBJ_EVENT_GFX_WALLY},
+		.spritetype = {OBJECT},
+		.subquests = NULL,
+		.numSubquests = 0,
+		.questVariable = 0,	
+	},
 };
 ////////////////////////END QUEST CUSTOMIZATION////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////
@@ -2104,22 +2162,22 @@ void PrintQuestFlavorText(s32 questId)
 
 static const u8 *GetQuestLocation(s32 questId)
 {
-    switch (questId) {
-        case QUEST_3:
-            return gTable_Quest3Maps[VarGet(sSideQuests[questId].questVariable)]; // uses first unused VAR in include/constants/vars.h
-        default:
-            return sSideQuests[questId].map;
-    }
+	u32 qvar = VarGet(sSideQuests[questId].questVariable);
+	
+	if (sSideQuests[questId].map[qvar] == NULL)
+		qvar = 0;
+
+	return sSideQuests[questId].map[qvar];
 }
 
 static const u8 *GetQuestDesc(s32 questId)
 {
-	switch (questId) {
-        case QUEST_3:
-            return gTable_Quest3Descs[VarGet(sSideQuests[questId].questVariable)]; // uses first unused VAR in include/constants/vars.h
-        default:
-            return sSideQuests[questId].desc;
-    }
+	u32 qvar = VarGet(sSideQuests[questId].questVariable);
+	
+	if (sSideQuests[questId].desc[qvar] == NULL)
+		qvar = 0;
+
+	return sSideQuests[questId].desc[qvar];
 }
 
 
@@ -2302,24 +2360,22 @@ static void QuestMenu_DestroySprite(u8 idx)
 
 static u16 GetSpriteId_Complex(s32 questId)
 {
-	switch (questId)
-    {
-		case QUEST_3:
-		    return Quest3Sprites[VarGet(sSideQuests[questId].questVariable)]; // uses first unused VAR in include/constants/vars.h
-		default:
-		    return sSideQuests[questId].sprite;
-	} 
+	u32 qvar = VarGet(sSideQuests[questId].questVariable);
+	
+	if (sSideQuests[questId].sprite[qvar] == 0)
+		qvar = 0;
+
+	return sSideQuests[questId].sprite[qvar];
 }
 
 static u8 GetSpriteType_Complex(s32 questId)
 {
-	switch (questId)
-    {
-		case QUEST_3:
-		    return Quest3SpriteTypes[VarGet(sSideQuests[questId].questVariable)]; // uses first unused VAR in include/constants/vars.h
-		default:
-		    return sSideQuests[questId].spritetype;
-	} 
+	u32 qvar = VarGet(sSideQuests[questId].questVariable);
+	
+	if (sSideQuests[questId].spritetype[qvar] == 0)
+		qvar = 0;
+
+	return sSideQuests[questId].spritetype[qvar];
 }
 
 

From 739972fb7fe7c8df1a40bf135a002ffaf5ffa092 Mon Sep 17 00:00:00 2001
From: RubyRaven6 <swampertspawner@gmail.com>
Date: Wed, 14 May 2025 10:21:51 +0800
Subject: [PATCH 5/5] Removed "defaults" for complex quests

---
 src/quests.c | 24 ++++++++++++++++++++----
 1 file changed, 20 insertions(+), 4 deletions(-)

diff --git a/src/quests.c b/src/quests.c
index 76e796b186b2..93037bdf3059 100644
--- a/src/quests.c
+++ b/src/quests.c
@@ -594,11 +594,27 @@ static const struct SideQuest sSideQuests[QUEST_COUNT] =
 	[QUEST_3] = 
 	{
 		.name = gText_SideQuestName_3,
-		.desc = {gText_SideQuestDesc_3,gComplexQuest_Quest3Desc_1,gComplexQuest_Quest3Desc_2,gComplexQuest_Quest3Desc_3},
+		.desc = {
+			gComplexQuest_Quest3Desc_1,
+			gComplexQuest_Quest3Desc_2,
+			gComplexQuest_Quest3Desc_3
+		},
 		.donedesc = gText_SideQuestDoneDesc_3,
-		.map = {gText_SideQuestMap3, gComplexQuest_Quest3Map_1,	gComplexQuest_Quest3Map_2, gComplexQuest_Quest3Map_3},
-		.sprite = {OBJ_EVENT_GFX_WALLY,OBJ_EVENT_GFX_WALLY,OBJ_EVENT_GFX_WALLY,OBJ_EVENT_GFX_WALLY},
-		.spritetype = {OBJECT,OBJECT,OBJECT,OBJECT},
+		.map = {
+			gComplexQuest_Quest3Map_1,
+			gComplexQuest_Quest3Map_2,
+			gComplexQuest_Quest3Map_3
+		},
+		.sprite = {
+			OBJ_EVENT_GFX_WALLY,
+			OBJ_EVENT_GFX_WALLY,
+			OBJ_EVENT_GFX_WALLY
+		},
+		.spritetype = {
+			OBJECT,
+			OBJECT,
+			OBJECT
+		},
 		.subquests = sSubQuests2,
 		.numSubquests = QUEST_2_SUB_COUNT,
 		.questVariable = VAR_UNUSED_0x404E //First unused var in vars.h,
